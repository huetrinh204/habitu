<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Habitu üê± - C·ªông ƒê·ªìng</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="./assets/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    /* Animation cho popup */
    .popup-enter {
      opacity: 0;
      transform: scale(0.95);
    }
    .popup-enter-active {
      opacity: 1;
      transform: scale(1);
      transition: all 0.25s ease-out;
    }
    .popup-exit {
      opacity: 1;
      transform: scale(1);
    }
    .popup-exit-active {
      opacity: 0;
      transform: scale(0.9);
      transition: all 0.2s ease-in;
    }
  </style>
</head>

<body class="bg-gradient-to-br from-cyan-300 to-teal-400 min-h-screen">

<!-- NAV -->
<nav class="flex justify-between px-8 py-3 items-center bg-gradient-to-r from-purple-600 to-pink-500 text-white shadow-lg">
    <div class="flex items-center gap-3">
        <img style="border-radius: 60%;" src="assets/logo_habitu.png" width="38">
        <h2 class="text-xl font-bold">Habitu</h2>
    </div>

    <ul class="flex gap-8 font-medium">
        <li class="flex items-center gap-1"><i class="fas fa-home"></i>
            <a href="dashboard.html" class="hover:text-yellow-300 transition">Trang Ch·ªß</a></li>

        <li class="flex items-center gap-1">
            <i class="fas fa-book"></i>
            <a href="journal.html" class="hover:text-yellow-300 transition">Nh·∫≠t K√Ω</a>
        </li>

        <li class="flex items-center gap-1">
            <i class="fas fa-users"></i>
            <a href="community.html" class="hover:text-yellow-300 transition font-bold underline">C·ªông ƒê·ªìng</a>
        </li>

        <li class="flex items-center gap-1"><i class="fas fa-chart-bar"></i>
            <a href="#" class="hover:text-yellow-300 transition">Th·ªëng K√™</a></li>

        <li class="flex items-center gap-1"><i class="fas fa-user"></i>
            <a href="#" class="hover:text-yellow-300 transition">T√†i Kho·∫£n</a></li>

        <li class="flex items-center gap-1"><i class="fas fa-question-circle"></i>
            <a href="#" class="hover:text-yellow-300 transition">H·ªó Tr·ª£</a></li>
    </ul>

    <div class="flex items-center gap-2">
        <i class="fas fa-user-circle text-xl"></i>
        <span>Ng∆∞·ªùi d√πng</span>
    </div>
</nav>

<!-- MAIN CONTENT -->
<section class="container mx-auto mt-10 px-4">

  <!-- MAIN CARD -->
  <div class="bg-white/90 backdrop-blur-sm p-8 rounded-3xl shadow-xl max-w-4xl mx-auto">

    <h2 class="text-xl font-semibold text-teal-700">C·ªông ƒê·ªìng M√®o Th√≥i Quen</h2>
    <p class="text-gray-700 mb-4">
      Chia s·∫ª h√†nh tr√¨nh v√† ƒë·ªông vi√™n nhau x√¢y d·ª±ng th√≥i quen l√†nh m·∫°nh üêæ‚ú®
    </p>

    <!-- FORM ƒêƒÇNG B√ÄI -->
    <div class="mb-6">
      <textarea
        placeholder="Chia s·∫ª c√¢u chuy·ªán c·ªßa b·∫°n..."
        class="w-full h-32 border border-teal-300 rounded-xl p-3 outline-none focus:ring-2 focus:ring-teal-400 bg-gray-50">
      </textarea>

      <button class="mt-3 px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white rounded-md flex items-center gap-2">
        <i class="fa-solid fa-paper-plane"></i> ƒêƒÉng B√†i
      </button>
    </div>

    <!-- B√ÄI VI·∫æT DEMO -->
    <div class="bg-white rounded-2xl shadow p-5 border cursor-pointer"
         onclick="openPostDetail()">

      <div class="flex gap-3">
        <img src="assets/icons/avatar1.png" class="w-12 h-12 rounded-full border">

        <div>
          <h4 class="font-semibold">Minh Anh</h4>
          <p class="text-gray-500 text-sm">2 gi·ªù tr∆∞·ªõc</p>
        </div>
      </div>

      <p class="mt-3 text-gray-800 leading-relaxed">
        M√¨nh ƒë√£ ho√†n th√†nh 30 ng√†y li√™n t·ª•c t·∫≠p th·ªÉ d·ª•c! C·∫£m gi√°c th·∫≠t tuy·ªát v·ªùi üí™‚ú®
      </p>

      <div class="flex gap-6 mt-4 text-gray-600">
        <span class="flex items-center gap-1"><i class="fa-regular fa-heart"></i> 24</span>
        <span class="flex items-center gap-1"><i class="fa-regular fa-comment"></i> 1</span>
      </div>

    </div>

  </div>

</section>



<!-- POPUP XEM B√ÄI CHI TI·∫æT -->
<div id="postDetailPopup"
     class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden justify-center items-center p-4 z-50">

  <div id="postDetailCard"
       class="bg-white w-full max-w-2xl rounded-2xl shadow-xl p-6 popup-enter">

    <!-- Header -->
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-xl font-semibold text-gray-800">B√†i vi·∫øt</h3>
      <button onclick="closePostDetail()" class="text-gray-500 text-2xl hover:text-black">√ó</button>
    </div>

    <!-- Author Info -->
    <div class="flex gap-3 items-center mb-4">
      <img id="detailAvatar" src="" class="w-12 h-12 rounded-full border">
      <div>
        <h4 id="detailName" class="font-semibold text-gray-800"></h4>
        <p id="detailTime" class="text-gray-500 text-sm"></p>
      </div>
    </div>

    <!-- Content -->
    <p id="detailContent" class="text-gray-800 leading-relaxed mb-4"></p>

    <!-- Reaction -->
    <div class="flex gap-6 text-gray-600 mb-6">
      <span class="flex items-center gap-1"><i class="fa-regular fa-heart"></i> <span id="detailLikes">0</span></span>
      <span class="flex items-center gap-1"><i class="fa-regular fa-comment"></i> <span id="detailCommentsCount">0</span></span>
    </div>

    <!-- Comment List -->
    <div id="commentList" class="space-y-3 max-h-56 overflow-y-auto pr-2"></div>

    <!-- Write Comment -->
    <div class="mt-4">
      <textarea id="commentInput"
                placeholder="Vi·∫øt b√¨nh lu·∫≠n..."
                class="w-full border border-gray-300 rounded-lg p-3 h-20 focus:ring-2 focus:ring-teal-400"></textarea>

      <button onclick="addComment()"
        class="mt-2 px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white rounded-md shadow">
        G·ª≠i b√¨nh lu·∫≠n
      </button>
    </div>

  </div>
</div>



<!-- JAVASCRIPT -->
<script>
let selectedPost = null;

// POST DEMO (sau n√†y thay b·∫±ng PHP)
const demoPost = {
  avatar: "assets/icons/avatar1.png",
  name: "Minh Anh",
  time: "2 gi·ªù tr∆∞·ªõc",
  content: "M√¨nh ƒë√£ ho√†n th√†nh 30 ng√†y li√™n t·ª•c t·∫≠p th·ªÉ d·ª•c! C·∫£m gi√°c th·∫≠t tuy·ªát v·ªùi üí™‚ú®",
  likes: 24,
  comments: [
    { name: "B·∫£o Ng·ªçc", text: "Tuy·ªát v·ªùi qu√°! Ch√∫c m·ª´ng b·∫°n üéâ" },
    { name: "Huy Ho√†ng", text: "C·ªë g·∫Øng duy tr√¨ n·ªØa nha!" }
  ]
};


function openPostDetail(post = demoPost) {
  selectedPost = post;

  document.getElementById("detailAvatar").src = post.avatar;
  document.getElementById("detailName").textContent = post.name;
  document.getElementById("detailTime").textContent = post.time;
  document.getElementById("detailContent").textContent = post.content;
  document.getElementById("detailLikes").textContent = post.likes;
  document.getElementById("detailCommentsCount").textContent = post.comments.length;

  renderComments();

  const popup = document.getElementById("postDetailPopup");
  popup.classList.remove("hidden");

  const card = document.getElementById("postDetailCard");
  card.classList.remove("popup-exit", "popup-exit-active");
  card.classList.add("popup-enter-active");
}


function closePostDetail() {
  const card = document.getElementById("postDetailCard");
  const popup = document.getElementById("postDetailPopup");

  card.classList.remove("popup-enter-active");
  card.classList.add("popup-exit-active");

  setTimeout(() => popup.classList.add("hidden"), 200);
}


// RENDER COMMENT LIST
function renderComments() {
  const list = document.getElementById("commentList");
  list.innerHTML = "";

  selectedPost.comments.forEach(c => {
    const item = document.createElement("div");
    item.className = "bg-gray-100 p-3 rounded-lg";
    item.innerHTML = `<strong>${c.name}:</strong> ${c.text}`;
    list.appendChild(item);
  });
}


// ADD COMMENT
function addComment() {
  const input = document.getElementById("commentInput");
  const text = input.value.trim();
  if (text === "") return;

  selectedPost.comments.push({
    name: "B·∫°n",
    text: text
  });

  input.value = "";
  renderComments();

  document.getElementById("detailCommentsCount").textContent = selectedPost.comments.length;
}
</script>

</body>
</html>
